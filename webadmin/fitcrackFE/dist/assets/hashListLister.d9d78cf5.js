import{H as o}from"./hashTypeAutocomplete.beeb1b52.js";import{n as h}from"./index.e9edaf92.js";import"./vendor.6aa46313.js";var d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cont"},[e("v-toolbar",{attrs:{flat:""}},[e("h2",[t._v("Hashlists")]),e("v-spacer"),e("v-btn",{attrs:{text:"",color:"primary",to:{name:"createHashlist"}}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-book-plus ")]),t._v(" Create new ")],1)],1),e("div",{staticClass:"d-flex mx-3"},[e("v-switch",{staticClass:"mx-2",attrs:{label:"Show discarded","prepend-icon":"mdi-delete-empty"},on:{change:t.loadHashes},model:{value:t.isTrash,callback:function(a){t.isTrash=a},expression:"isTrash"}}),e("v-text-field",{staticClass:"mx-2 search-field",attrs:{clearable:"","prepend-icon":"mdi-table-search",label:"Search","single-line":""},on:{input:t.loadHashes},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}}),e("HashTypeAutocomplete",{staticClass:"mx-2",attrs:{label:"Filter by hash type","single-line":"","prepend-icon":"mdi-lock",clearable:""},on:{input:t.loadHashes},model:{value:t.hash_type,callback:function(a){t.hash_type=a},expression:"hash_type"}})],1),e("v-divider"),e("v-data-table",{ref:"table",attrs:{headers:t.headers,items:t.hashlists,search:t.search,options:t.dataTableOptions,"server-items-length":t.totalItems,loading:t.loading,"footer-props":{itemsPerPageOptions:[25,50,100],itemsPerPageText:"Hashlists per page"}},on:{"update:options":function(a){t.dataTableOptions=a}},scopedSlots:t._u([{key:"item.name",fn:function(a){var i=a.item;return[e("router-link",{attrs:{to:{name:"hashlistDetail",params:{id:i.id}}}},[t._v(" "+t._s(i.name)+" ")])]}},{key:"item.actions",fn:function(a){var i=a.item;return[e("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{icon:"",href:t.$serverAddr+"/hashlist/"+i.id+"/download"}},r),[e("v-icon",[t._v(" mdi-download ")])],1)]}}],null,!0)},[e("span",[t._v("Download")])]),e("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{icon:""},on:{click:function(v){return t.deleteOrRestore(i.id)}}},r),[e("v-icon",[t._v(" "+t._s(t.isTrash?"mdi-delete-restore":"mdi-delete")+" ")])],1)]}}],null,!0)},[e("span",[t._v(t._s(t.isTrash?"Restore":"Discard"))])])]}}])})],1)},c=[];const u={name:"HashListLister",data:function(){return{interval:null,status:"active",totalItems:0,dataTableOptions:{},loading:!0,headers:[{text:"Name",value:"name",align:"start",sortable:!0},{text:"Hash type",value:"hash_type_name",align:"end",sortable:!0},{text:"Entries",value:"hash_count",align:"end",sortable:!1},{text:"Jobs",value:"job_count",align:"end",sortable:!1},{text:"Actions",value:"actions",align:"end",sortable:!1}],hashlists:[],search:"",hash_type:null,isTrash:!1}},watch:{dataTableOptions:{handler:function(t){this.loadHashes()},deep:!0}},mounted(){this.loadHashes(),this.interval=setInterval(function(){this.loadHashes(!0)}.bind(this),5e3)},beforeDestroy:function(){clearInterval(this.interval)},computed:{orderBy(){const t=this.dataTableOptions.sortBy;if(t.length>0)switch(t[0]){case"name":return"name";case"hash_type_name":return"hash_type";default:return null}else return null}},methods:{loadHashes(t=!1){t||(this.loading=!0),this.axios.get(this.$serverAddr+"/hashlist",{params:{page:this.dataTableOptions.page,per_page:this.dataTableOptions.rowsPerPage,order_by:this.orderBy,descending:this.dataTableOptions.sortDesc?this.dataTableOptions.sortDesc[0]:!1,name:this.search,hash_type:this.hash_type?this.hash_type.name:null,showDeleted:this.isTrash}}).then(s=>{this.hashlists=s.data.items,this.totalItems=s.data.total,this.loading=!1})},updateStatus:function(t){this.status=t,this.$refs.table.updatePagination({page:1,totalItems:this.totalItems})},deleteOrRestore(t){this.axios.delete(`${this.$serverAddr}/hashlist/${t}`).then(this.loadHashes)}},components:{HashTypeAutocomplete:o}},l={};var p=h(u,d,c,!1,m,"35d3b34d",null,null);function m(t){for(let s in l)this[s]=l[s]}var y=function(){return p.exports}();export{y as default};
