import{f as s}from"./numberFormat.773889d3.js";import{t as u}from"./fc_tile.217bb9a5.js";import{F as d}from"./fileUploader.8959d605.js";import{n as c}from"./index.d3f441ac.js";import"./vendor.6aa46313.js";var v=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-container",{staticClass:"max700"},[e("fc-tile",{staticClass:"ma-2",attrs:{title:"Rules",icon:t.$route.meta.icon}},[e("v-alert",{staticClass:"mb-0",attrs:{tile:"",text:"",type:"warning"}},[t._v(" Rule files must have a .txt or .rule extension. ")]),e("v-data-table",{attrs:{headers:t.headers,items:t.rules.items,loading:t.loading,"footer-props":{itemsPerPageOptions:[10,25,50],itemsPerPageText:"Rules per page"}},scopedSlots:t._u([{key:"item.name",fn:function(n){var r=n.item;return[e("router-link",{attrs:{to:"rules/"+r.id}},[t._v(" "+t._s(r.name)+" ")])]}},{key:"item.count",fn:function(n){var r=n.item;return[t._v(" "+t._s(t.fmt(r.count))+" ")]}},{key:"item.time",fn:function(n){var r=n.item;return[t._v(" "+t._s(t.$moment.utc(r.time).local().format("DD.MM.YYYY HH:mm"))+" ")]}},{key:"item.actions",fn:function(n){var r=n.item;return[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on;return[e("router-link",{attrs:{to:"/rules/edit/"+r.id}},[e("v-btn",t._g({attrs:{icon:""}},a),[e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-file-edit-outline")])],1)],1)]}}],null,!0)},[e("span",[t._v("Edit file")])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on;return[e("a",t._g({attrs:{href:t.$serverAddr+"/rule/"+r.id+"/download",target:"_blank",download:""}},a),[e("v-btn",{attrs:{icon:""}},[e("v-icon",[t._v("mdi-file-download-outline")])],1)],1)]}}],null,!0)},[e("span",[t._v("Download")])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(o){var a=o.on;return[e("v-btn",t._g({attrs:{icon:""},on:{click:function(h){return t.deleteRule(r)}}},a),[e("v-icon",{attrs:{color:"error"}},[t._v(" mdi-delete-outline ")])],1)]}}],null,!0)},[e("span",[t._v("Delete")])])]}}])}),e("v-divider"),e("v-row",{staticClass:"mt-0"},[e("v-col",{staticClass:"d-flex align-center justify-center"},[e("router-link",{attrs:{to:"/rules/edit/new"}},[e("v-btn",{attrs:{large:"",color:"primary"}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-file-plus ")]),t._v(" Create new rule file ")],1)],1)],1),e("v-col",[e("v-card",[e("v-card-title",{staticClass:"primary"},[t._v(" Upload existing rule file ")]),e("v-divider"),e("file-uploader",{attrs:{url:this.$serverAddr+"/rule"},on:{uploadComplete:t.loadRules}})],1)],1)],1)],1)],1)},m=[];const f={name:"RulesView",components:{FileUploader:d,"fc-tile":u},data:function(){return{loading:!1,rules:[],headers:[{text:"Name",align:"start",value:"name"},{text:"Count",value:"count",align:"end"},{text:"Added",value:"time",align:"end"},{text:"Actions",value:"actions",align:"end",sortable:!1}]}},mounted:function(){this.loadRules()},methods:{fmt:s,loadRules:function(){this.loading=!0,this.axios.get(this.$serverAddr+"/rule",{}).then(t=>{this.rules=t.data,this.loading=!1})},deleteRule:function(t){this.$root.$confirm("Delete",`This will remove ${t.name} from your rules. Are you sure?`).then(i=>{this.loading=!0,this.axios.delete(this.$serverAddr+"/rule/"+t.id).then(e=>{this.loadRules()})})}}},l={};var _=c(f,v,m,!1,p,"99caa6c8",null,null);function p(t){for(let i in l)this[i]=l[i]}var b=function(){return _.exports}();export{b as default};
